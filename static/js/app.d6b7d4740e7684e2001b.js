webpackJsonp([2],{"9SxT":function(n,e,t){"use strict";var o={angle:0,currentState:"intro",lineDensity:28,smoothSteps:1,mapOpacity:100,heightScale:42,oceanLevel:0,aboutVisible:!1,blank:!1,error:null,zazzleLink:null,startOver:function(){o.zazzleLink=null,o.generatingPreview=!1,o.currentState="intro",o.blank=!1,o.downloadOsmProgress=null},generatingPreview:!1,settingsOpen:!1,shouldDraw:!1,showPrintMessage:!1,renderProgress:null,hidePrintMessageForSession:!1,width:window.innerWidth,height:window.innerHeight,backgroundColor:{r:247,g:242,b:232,a:1},lineBackground:{r:247,g:242,b:232,a:1},lineColor:{r:22,g:22,b:22,a:1}};e.a=o},NHnr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("9SxT"),a=t("1e2d"),r=t.n(a),i=t("5dBV"),l=t.n(i);function c(n,e,t){var o=void 0;return a(),{cancel:function(){cancelAnimationFrame(o),n.renderProgress=null,n.showPrintMessage=!1},render:a};function a(){n.renderProgress&&(n.renderProgress.message="Rendering...");var a=l()(n.oceanLevel),i=parseFloat(n.smoothSteps);t.style.opacity=n.mapOpacity/100;var c=t.getContext("2d"),s=r(n.lineColor),u=r(n.lineBackground),m=window.innerHeight,d=window.innerWidth,h=Math.round(m*n.lineDensity/100),g=n.heightScale,f=e.getAllHeightData(),v=f.minHeight,w=f.maxHeight,p=f.rowWithHighestPoint,y=function(n,e,t){var o=Math.round(e/n);return{start:t-Math.floor(t/o)*o,step:o,stop:e}}(h,m,p),x=w-v,b=[],P=y.start;function z(n){if(!(n.length<3)){var e=function(n,e){for(var t=[],o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=n.length/2,i=0;i<r;i+=1){for(var l=i-e,c=l>=0?l:0,s=i+e+1,u=0,m=0,d=c;d<s&&d<r;d+=1)m+=n[2*d+1],u+=1;var h=m/u;t[2*i]=n[2*i],t[2*i+1]=h,o<h&&(o=h),a>h&&(a=h)}return{points:t,min:a,max:o}}(n,i);if(n=e.points,e.max-e.min>2){c.beginPath(),c.fillStyle=u,c.moveTo(n[0],n[1]);for(var t=2;t<n.length;t+=2)c.lineTo(n[t],n[t+1]);c.lineTo(n[n.length-2],e.max),c.lineTo(n[0],e.max),c.closePath(),c.fill()}c.beginPath(),c.strokeStyle=s,c.moveTo(n[0],n[1]);for(var o=2;o<n.length;o+=2)c.lineTo(n[o],n[o+1]);c.stroke()}}c.beginPath(),c.clearRect(0,0,d,m),c.fillStyle=r(n.backgroundColor),c.fillRect(0,0,d,m),function t(){var r=performance.now();for(var i=P;i<y.stop;i+=y.step){z(b),b=[];for(var l=0;l<window.innerWidth;++l){var c=e.getHeightAtPoint(l,i),s=i-Math.floor(g*(c-v)/x);c<=a?(z(b),b=[]):b.push(l,s)}P=i+y.step;var u=performance.now()-r;if(u>200)return void(o=requestAnimationFrame(t))}z(b);n.renderProgress=null}()}function r(n){return"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")"}}var s="pk.eyJ1IjoiYW52YWthIiwiYSI6ImNqaWUzZmhqYzA1OXMza213YXh2ZzdnOWcifQ.t5yext53zn1c9Ixd7Y41Dw",u=t("//Fk"),m=t.n(u),d="https://api.mapbox.com/v4/mapbox.terrain-rgb/zoom/tLong/tLat@2x.pngraw?access_token="+s;function h(n,e,t){e||(e={});var o=512,a=n.transform.tileZoom,r=Math.pow(2,a),i=n.transform.coveringTiles({minzoom:a,maxzoom:a,tileSize:o}),l=i.reduce(function(n,e){var t=e.canonical;return n.minX>t.x&&(n.minX=t.x),n.minY>t.y&&(n.minY=t.y),n.maxX<t.x&&(n.maxX=t.x),n.maxY<t.y&&(n.maxY=t.y),n},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),c=document.createElement("canvas"),s=l.maxX-l.minX,u=l.maxY-l.minY;if(s>50||u>50)throw new Error("Too many tiles requested. How did you do it?");c.width=s*o+o,c.height=u*o+o;var h=c.getContext("2d"),g=l.minX,f=l.minY;e.total=i.length,y();var v=void 0,w=!1,p=i.map(function(n){var e=function(n){var e=n.canonical;return{url:d.replace("zoom",e.z).replace("tLat",e.y).replace("tLong",e.x),x:o*(e.x-l.minX),y:o*(e.y-l.minY)}}(n);return(t=e.url,new m.a(function(n,e){var o=new Image;o.onload=function(){n(o)},o.onerror=e,o.crossOrigin="anonymous",o.src=t})).then(function(n){h.drawImage(n,e.x,e.y)}).catch(function(){h.beginPath(),h.fillStyle="#0186a0",h.fillRect(e.x,e.y,o,o)}).finally(y);var t});return m.a.all(p).then(function(){var e=c.width,t=h.getImageData(0,0,e,c.height).data,a=window.innerWidth,i=window.innerHeight,l=new Float32Array(a*i),s=void 0,u=16,d=1/0,p=-1/0,y=-1,x=0;return v=requestAnimationFrame(function n(){for(var e=window.performance.now(),t=x;t<i;++t){for(var o=0;o<a;++o){var r=t*a+o,c=b(o,t);l[r]=c,c<d&&(d=c),c>p&&(p=c,y=t)}var m=window.performance.now()-e;if(m>u)return void(w||(v=requestAnimationFrame(n)));x=t}s({minHeight:d,maxHeight:p,rowWithHighestPoint:y,allHeights:l,windowWidth:a,windowHeight:i})}),new m.a(function(n){s=n});function b(a,i){var l=n.transform.pointLocation({x:a,y:i}),c=function(n,e){return(n+180)/360*e}(l.lng,r),s=(c-g)*o,u=function(n,e){var t=n*Math.PI/180;return(1-Math.log(Math.tan(t)+1/Math.cos(t))/Math.PI)/2*e}(l.lat,r),m=(u-f)*o,d=Math.round(m),h=Math.round(s),v=4*(d*e+h),w=t[v+0],p=t[v+1],y=t[v+2];return function(n,e,t){var o=.1*(256*n*256+256*e+t)-1e4;o<-100&&(o/=5e3);return o}(w,p,y)}}).then(function(n){var e=n.windowWidth,t=n.allHeights;return{getHeightAtPoint:function(n,o){return t[n+o*e]},getAllHeightData:function(){return n}}}).then(function(n){w||t(n)}),{cancel:function(){w=!0,cancelAnimationFrame(v)}};function y(){void 0===e.completed&&(e.completed=-1),e.completed=Math.min(e.total,e.completed+1),e.message="Downloading tiles: "+e.completed+" of "+e.total+"..."}}var g=t("xQT3");t.e(0).then(function(){t("WOBu")}.bind(null,t)).catch(t.oe);var f=void 0,v=void 0,w=void 0,p=void 0;function y(){clearTimeout(p),o.a.zazzleLink=null;var n=document.querySelector(".height-map");n&&(n.style.opacity=.02)}function x(){if(f){var n=document.querySelector(".height-map");n&&(v&&v.cancel(),w&&w.cancel(),clearTimeout(p),p=setTimeout(function(){o.a.showPrintMessage=!0},1e4),o.a.shouldDraw?(n.style.display="",o.a.showPrintMessage=!1,o.a.renderProgress={message:"",isCancelled:!1,completed:!1},w=h(f,o.a.renderProgress,function(e){v=c(o.a,e,n)})):n.style.display="none")}}o.a.init=function(){r.a.accessToken=s,window.map=f=new r.a.Map({trackResize:!0,container:"map",minZoom:0,style:"mapbox://styles/mapbox/light-v10",center:[-122.574,47.727],zoom:7.68,hash:!0}),f.addControl(new r.a.NavigationControl({showCompass:!1}),"bottom-right"),f.addControl(new g({accessToken:r.a.accessToken})),f.on("moveend",function(){f.once("idle",x)}),f.on("movestart",y),f.on("load",function(){o.a.angle=f.getBearing()}),f.dragRotate.disable(),f.touchZoomRotate.disableRotation()},o.a.redraw=function(){if(!v)return;v.cancel(),v.render()},o.a.updateMap=x}},["NHnr"]);
//# sourceMappingURL=app.d6b7d4740e7684e2001b.js.map